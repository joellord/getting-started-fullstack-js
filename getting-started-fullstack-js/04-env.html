<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Link the front-end and back-end :: Getting Started with OpenShift for Full Stack JavaScript</title>
    <link rel="canonical" href="https://joellord.github.io/getting-started-fullstack-js/getting-started-fullstack-js/04-env.html">
    <link rel="prev" href="03-back.html">
    <link rel="next" href="05-db.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../_/css/site.css">
<link rel="icon" href="../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img
          src="../_/img/header_logo.png" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" href="https://joellord.github.io/getting-started-fullstack-js">Getting Started with OpenShift for Full Stack JavaScript</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Books</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">CheatSheets</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">CheatSheet A</a>
            <a class="navbar-item" href="#">CheatSheet B</a>
            <a class="navbar-item" href="#">CheatSheet C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Upcoming Events</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Event A</a>
            <a class="navbar-item" href="#">Event B</a>
            <a class="navbar-item" href="#">Event C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Tutorial A</a>
            <a class="navbar-item" href="#">Tutorial B</a>
            <a class="navbar-item" href="#">Tutorial C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="getting-started-fullstack-js" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">Getting Started with OpenShift for Full Stack JavaScript</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="01-setup.html">Setup</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-setup.html#prerequisite">Prerequisites</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-setup.html#devsandbox">Create a Developer Sandbox Account</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-setup.html#oc">Configure <code>oc</code></a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-setup.html#locally">Run Application Locally</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="02-front.html">Deploy the Front-End</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-front.html#build">Build Container</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-front.html#push">Push to a registry</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-front.html#newapp">Deploy the front-end</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-front.html#expose">Expose the application</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-front.html#status">Verify application status</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="03-back.html">Deploy the back-end</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-back.html#s2i">Use s2i</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-back.html#clienv">Configure environment variables</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-back.html#expose">Expose the application</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-back.html#health">Add a health check</a>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="04-env.html">Link the front-end and back-end</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#env">Add the BASE_URL variable</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#test">Test the application</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="05-db.html">Add a Database</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="05-db.html#catalog">Deploy from the catalog</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="05-db.html#env">Use the UI to configure env variables</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="05-db.html#frontenv">Edit front-end env variables</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="05-db.html#status">Verify the application status</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="06-redirector.html">Add a new micro-service</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="06-redirector.html#image">Add from existing image</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="06-redirector.html#env">Update Environment variables</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="06-redirector.html#status">Verify the status of the application</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Getting Started with OpenShift for Full Stack JavaScript</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Getting Started with OpenShift for Full Stack JavaScript</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Getting Started with OpenShift for Full Stack JavaScript</a></li>
    <li><a href="04-env.html">Link the front-end and back-end</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/redhat-scholars/getting-started-fullstack-js/edit/master/documentation/modules/ROOT/pages/04-env.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">Link the front-end and back-end</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Now what the back-end is up and running, you can test out the About page again. If you open up the developer tools and look at the network requests, you can notice that some requests are made to `%SERVER_NAME%/$BASE_URL/health.</p>
</div>
<div class="paragraph">
<p>That is because the front-end currently doesn&#8217;t have a value for the $BASE_URL environment variables.</p>
</div>
<div class="paragraph">
<p>To learn more about how the front-end container injects those variables in the JavaScript code, you can look at <a href="https://github.com/joellord/frontend-containers">this blog post</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="env"><a class="anchor" href="#env"></a>Add the BASE_URL variable</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can add environment variables using the <code>oc</code> CLI tool, but before you do so, you need to find the BASE_URL that the front-end needs to connect to.</p>
</div>
<div class="paragraph">
<p>This base URL is the route to your back-end. You can find this route by running the <code>get route</code> command.</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get route urlshortener</code></pre>
</div>
</div>
<div class="listingblock console-output">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">NAME           HOST/PORT                                                         PATH   SERVICES       PORT       TERMINATION   WILDCARD
urlshortener   urlshortener-joelphy-dev.apps.sandbox.x8i5.p1.openshiftapps.com          urlshortener   8080-tcp                 None</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you only want to get the actual route, you can use <code>awk</code> to help you.</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get route urlshortener | awk 'NR&gt;1 {print $2}'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now that you know how to get the URL, you can set it as an environment variable for the urlshortener-front deployment by using the <code>set env</code> command with <code>oc</code>. Give it the environment variable name and the value of that route. Don&#8217;t forget to prepend it with http://.</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc set env deployment/urlshortener-front BASE_URL=http://$(oc get route urlshortener | awk 'NR&gt;1 {print $2}')</code></pre>
</div>
</div>
<div class="listingblock console-output">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">deployment.apps/urlshortener-front updated</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="test"><a class="anchor" href="#test"></a>Test the application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now that you have configured the BASE_URL environment variable, you can go back to the URL Shortener application and check the About page again.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/server-up.png" alt="Server up and running"></span></p>
</div>
<div class="paragraph">
<p>You can see that the server is now up and running. The database and redirector services are still unreachable because you have not deployed them yet. Let fix that right now.</p>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="03-back.html">Deploy the back-end</a></span>
  <span class="next"><a href="05-db.html">Add a Database</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../_/js/vendor/clipboard.js"></script>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
  </body>
</html>
